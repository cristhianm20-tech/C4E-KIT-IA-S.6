**title**: "Evaluación Completa y Migración – Java 11→17, Spring Boot 2.7→3.x (CoT)"  
**date**: 2025-06-11  
**author**: "Santiago Correa"  
**tags**: [java, spring-boot, migration, code-audit, refactoring, chain-of-thought]
**recomnedación**: Añadir el contexto del workspace al momento de enviar el prompt

### Contexto
Este recipe utiliza **Chain-of-Thought** para realizar una evaluación exhaustiva de código Java antes de migrar de Spring Boot 2.7.0 con Java 11 a Java 17 y Spring Boot 3.x. El objetivo es identificar sistemáticamente todos los problemas, vulnerabilidades y mejoras necesarias antes del proceso de migración.

### Prompt (ES)
Eres un Senior Java Architect y Security Expert con amplia experiencia en migraciones Spring Boot y evaluaciónes de código.
Asegurate de primero analizar completamente el proyecto actual (Estructura, clases, librerías, dependencias, etc).
Razona paso a paso (máximo 8 pasos en español) cómo realizarías una **evaluación completa de código** para poder migrar este proyecto que utiliza gradle, de Spring Boot 2.7.0 (Java 11) a Spring Boot 3.x (Java 17), Asegurate de responder siempre en español:

**Proceso de análisis del proyecto paso a paso:**
1. **Análisis de Estructura y Arquitectura**  
   - Examinar la estructura de paquetes y separación de responsabilidades  
   - Identificar violaciones de principios SOLID  
   - Detectar acoplamiento fuerte entre componentes  
   - Evaluar patrones de diseño implementados incorrectamente

2. **Identificación de Code Smells**  
   - Métodos demasiado largos (>20 líneas)  
   - Clases con demasiadas responsabilidades  
   - Duplicación de código  
   - Complejidad ciclomática alta  
   - Parámetros excesivos en métodos  
   - Variables/métodos con nombres poco descriptivos

3. **evaluación de Seguridad Crítica**  
   - Vulnerabilidades de inyección SQL  
   - Exposición de información sensible en logs  
   - Validación insuficiente de entrada  
   - Configuraciones de seguridad débiles  
   - Manejo inseguro de tokens/passwords  
   - Endpoints sin autenticación/autorización adecuada

4. **Análisis de Dependencias y Compatibilidad**  
   - Dependencias obsoletas o con vulnerabilidades conocidas  
   - Librerías incompatibles con Java 17  
   - Versiones de Spring Security que requieren migración  
   - APIs deprecated que serán removidas en Spring Boot 3.x

5. **Detección de Problemas de Migración Específicos**  
   - Uso de `javax.*` en lugar de `jakarta.*`  
   - Configuraciones Spring Security que cambiarán  
   - Propiedades application.yml/properties deprecated  
   - Anotaciones y configuraciones que requieren actualización

6. **Evaluación de Rendimiento y Escalabilidad**  
   - Consultas N+1 en JPA/Hibernate  
   - Falta de paginación en endpoints  
   - Manejo inadecuado de transacciones  
   - Memory leaks potenciales  
   - Blocking operations en contextos reactivos

7. **Análisis de Testing y Cobertura**  
   - Tests unitarios faltantes o inadecuados  
   - Tests de integración insuficientes  
   - Mocking inapropiado  
   - Cobertura de código por debajo del 80%

8. **Priorización y Plan de Remediación**  
   - Clasificar problemas por criticidad e impacto  
   - Estimar esfuerzo de corrección  
   - Definir orden de implementación de fixes  
   - Identificar quick wins vs. refactorings mayores

**Entrega el análisis en formato de tabla estructurada:**

| Categoría | Problema Detectado | Ubicación Específica | Criticidad | Impacto en Migración | Solución Recomendada | Esfuerzo Estimado |
|-----------|-------------------|---------------------|------------|---------------------|---------------------|------------------|
| Code Smell | [Descripción] | [Clase.método:línea] | Alta/Media/Baja | Bloqueante/Alto/Medio/Bajo | [Acción específica] | [Horas] |
| Seguridad | [Vulnerabilidad] | [Ubicación] | Crítica/Alta/Media | [Impacto] | [Solución] | [Tiempo] |
| Dependencias | [Librería obsoleta] | [build.gradle] | Alta/Media | [Incompatibilidad] | [Versión nueva] | [Esfuerzo] |

**Además, proporciona:**
- **Resumen Ejecutivo** con métricas clave (total de issues, distribución por criticidad)

**Formato esperado de respuesta:**
```
**evaluación DE CÓDIGO - REPORTE EJECUTIVO**

**Métricas Generales:**
- Total de issues detectados: X
- Criticidad Alta: X | Media: X | Baja: X
- Bloqueantes para migración: X
- Vulnerabilidades de seguridad: X

**TABLA DE ANÁLISIS DETALLADO:**
[Tabla completa con todos los hallazgos]

**PLAN DE REMEDIACIÓN FASEADO:**
Fase 1 (Críticos): [Lista prioritaria]
Fase 2 (Preparación migración): [Cambios necesarios]
Fase 3 (Post-migración): [Mejoras adicionales]